<?xml version="1.0" encoding="UTF-8"?>
<config>
	<modules>
		<TinyBrick_OrderEdit>
			<version>0.1.0</version>
		</TinyBrick_OrderEdit>
	</modules>
	<frontend>
        <routers>
            <orderedit>
                <use>standard</use>
                <args>
                    <module>TinyBrick_OrderEdit</module>
                    <frontName>orderedit</frontName>
                </args>
            </orderedit>
        </routers>
        <layout>
			<updates>
				<orderedit>
					<file>orderedit.xml</file>
				</orderedit>
			</updates>
		</layout>
    </frontend>
    <default>
    	<sales>
            <totals_sort>
                <discount>20</discount>
                <grand_total>100</grand_total>
                <shipping>30</shipping>
                <subtotal>10</subtotal>
                <tax>40</tax>
            </totals_sort>
            <reorder>
                <allow>1</allow>
            </reorder>
        </sales>
    </default>
	<global>
		<blocks>
			<orderedit>
				<class>
					TinyBrick_OrderEdit_Block
				</class>
			</orderedit>
		</blocks>
	    <models>
	        <orderedit>
	             <class>TinyBrick_OrderEdit_Model</class>
	             <resourceModel>orderedit_resource</resourceModel>
	        </orderedit>
	        <orderedit_resource>
	        	<class>TinyBrick_OrderEdit_Model_Resource</class>
	        	<entities>
                    <order_item><table>sales_flat_order_item</table></order_item>
                    <order_address><table>sales_flat_order_address</table></order_address>
                    <order_address_rate><table>sales_flat_order_shipping_rate</table></order_address_rate>
	        	</entities>
	        </orderedit_resource>
	        <shipping>
				<rewrite>
					<carrier_flatrate>TinyBrick_OrderEdit_Model_Carrier_Flatrate</carrier_flatrate>
				</rewrite>
			</shipping>
	    </models>
	    <helpers>
	    	<orderedit>
	    		<class>TinyBrick_OrderEdit_Helper</class>
	    	</orderedit>
    	</helpers>
	    <resources>
	            <orderedit_setup>
	                <setup>
	                    <module>TinyBrick_OrderEdit</module>
	                </setup>
	                <connection>
	                    <use>core_setup</use>
	                </connection>
	            </orderedit_setup>
	            <orderedit_write>
	                <connection>
	                    <use>core_write</use>
	                </connection>
	            </orderedit_write>
	            <orderedit_read>
	                <connection>
	                    <use>core_read</use>
	                </connection>
	            </orderedit_read>
	    </resources>
	    
	    <orderedit>
            <order>
                <totals>
                    <subtotal>
                        <class>orderedit/order_address_total_subtotal</class>
                        <before>grand_total</before>
                    </subtotal>
                    <discount>
                        <class>orderedit/order_address_total_discount</class>
                        <after>subtotal</after>
                        <before>grand_total,shipping</before>
                    </discount>
                    <shipping>
                        <class>orderedit/order_address_total_shipping</class>
                        <after>subtotal,discount</after>
                        <before>grand_total</before>
                    </shipping>
                    <tax>
                        <class>orderedit/order_address_total_tax</class>
                        <after>subtotal,shipping</after>
                        <before>grand_total</before>
                        <renderer>checkout/total_tax</renderer>
                        <admin_renderer>adminhtml/sales_order_create_totals_tax</admin_renderer>
                    </tax>
                    <grand_total>
                        <class>orderedit/order_address_total_grand</class>
                        <after>subtotal</after>
                    </grand_total>
                </totals>
              </order>
        </orderedit>
        
	 </global>
</config>